<!DOCTYPE html>
<html>
    <head>
        <title>Objective-C - Cheatsheet</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
        <h1>Objective-C</h1>

        <section>
            <h2>Classes</h2>
            <div class="row">
                <div class="col-2">
                    <em class="code-title">.h file</em>
                    <pre>
<code>@interface <span class="blue">ClassName</span> : <span class="blue">Superclass</span> {
<span class="green block"><span class="hide">  // </span>Instance Variables<span class="br"> </span>(Protected)</span>
}

<span class="green block"><span class="hide">  // </span>Public Methods</span>
@end</code>
                    </pre>
                </div>
                <div class="col-2">
                    <em class="code-title">.m file</em>
                    <pre>
<code>@implementation <span class="blue">ClassName</span> {
<span class="green block"><span class="hide">  // </span>Instance Variables<span class="br"> </span>(Private)</span>
}

<span class="green block"><span class="hide">  // </span>Public/Private Method Implementations</span>
@end</code>
                     </pre>
                </div>
            </div>
            <div class="row">
                <h3>Instance Variable Directives</h3>
                <ul class="nobullets">
                    <li><strong>@protected</strong> - own class and subclasses can access the ivars; default for ivars defined under @interface</li>
                    <li><strong>@private</strong> - only own class can access the ivars; default for ivars defined under @implementation</li>
                    <li><strong>@public</strong> - any class can access the ivars.</li>
                    <li><strong>@package</strong></li>
                </ul>
            </div>
        </section>

        <section>
            <h2>Properties / Synthesis</h2>
            <div class="row">
                <dl>
                    <dt><strong>@property</strong> identifies a property of a class, usually an instance variable to be exposed to the public.<br />(Defined in the @interface section.)</dt>
                    <dd>
                        <pre><code>@property (<span class="blue">attr1</span>, <span class="blue">attr2</span>, ...) <span class="blue">Type</span> <span class="blue">Name</span>;</code></pre>
                        Attributes:
                        <ul class="nobullets">
                            <li><strong>readwrite*</strong> / <strong>readonly</strong></li>
                            <li><strong>atomic*</strong> / <strong>nonatomic</strong></li>
                            <li><strong>assign</strong> / <strong>retain</strong> / <strong>copy</strong></li>
                            <li><strong>strong</strong> / <strong>weak</strong></li>
                            <li><strong>getter=</strong> / <strong>setter=</strong></li>
                        </ul>
                    </dd>
                    <dt><strong>@synthesize</strong> tells the compiler to automatically create the accessor methods for a given @property.<br />(Defined in the @implementation section.)</dt>
                    <dd>
                        <pre><code>@synthesize <span class="blue">Property</span> = _<span class="blue">Ivar</span>;</code></pre>
                    </dd>
                </dl>
            </div>
            <div class="row">
                    <em class="code-title">Example:</em>
                    <pre>
<code><span class="red">@synthesize</span> window = _window;     <span class="comment">// Synthesize the "window" property and assign
                                  // it to the "_window" instance variable
                                  //
                                  // the "= _window" part (and the corresponding declaration
                                  // of the ivar in the .h file) is only needed for iOS &lt;4.0</span>

[<span class="green">window</span> <span class="orange">makeKeyAndVisible</span>];       <span class="comment">// Error: non-existent instance variable "window"</span>
[<span class="green">_window</span> <span class="orange">makeKeyAndVisible</span>];      <span class="comment">// Ok.</span>
[<span class="blue">self</span>.<span class="green">window</span> <span class="orange">makeKeyAndVisible</span>];  <span class="comment">// Better. Using the synthesized accessor method</span>
</code>
                     </pre>
            </div>
        </section>

        <section>
            <h2>Categories</h2>
            <div class="row">
                <p>Categories are used to add methods to existing classes, especially when you don't have access to the existing source code.</p>
            </div>
            <div class="row">
                <div class="col-2">
                    <em class="code-title">.h file (convention: ClassName+CategoryName.h)</em>
                    <pre>
<code>#import "<span class="blue">ClassName</span>.h"

@interface <span class="blue">ClassName</span> (<span class="blue">CategoryName</span>)
<span class="hide">  // </span><span class="green block">Methods Only<span class="br"> </span>(No ivars)</span>
@end</code>
                    </pre>
                </div>
                <div class="col-2">
                    <em class="code-title">.m file</em>
                    <pre>
<code>@implementation <span class="blue">ClassName</span> (<span class="blue">CategoryName</span>)
<span class="hide">  // </span><span class="green block">Method Implementations</span>
@end</code>
                    </pre>
                </div>
            </div>
            <div class="row">
                <h3>Class Extensions</h3>
                <p>
                    A category defined without a name is a <em>class extension</em>, also sometimes called an <em>anonymous category</em>.
                    They allow you to extend a class by defining additional instance variables, properties, and private methods.
                    You need access to the original source code, since the extended methods are implemented in the original class' @implementation block.
                </p>
                <p>
                    Properties are automatically synthesized by the compiler.
                    Methods must be implemented in the class' primary @implementation block.
                </p>
                <p>
                    A common use case for class extensions is to redefine a <code>readonly</code> property to be <code>readwrite</code>, so that within the class it is modifiable, but outside the class it's only readable.
                </p>
                <div class="row">
                    <em class="code-title">Original .m file</em>
                    <pre>
<code><span class="hide">  // </span><span class="comment">...</span>

@interface <span class="blue">ClassName</span> () {
<span class="hide">  // </span><span class="green block">New private ivars</span>
}
<span class="hide">  // </span><span class="green block">New private properties and methods</span>
@end

<span class="hide">  // </span><span class="comment">...</span>

@implementation <span class="blue">ClassName</span>
<span class="hide">  // </span><span class="comment">...</span>
@end
</code>
                    </pre>
                </div>
            </div>
        </section>

        <section>
            <h2>Protocols</h2>
            <p>A protocol is a set of methods that a class adheres or <em>conforms</em> to. Adopters of a protocol must implement all of its required methods (methods can be declared @optional).</p>
            <p>Protocols can also conform to other protocols. Categories can also adopt protocols.</p>
            <div class="row">
                <div class="col-2">
                    <em class="code-title">Defining a protocol:</em>
                    <pre>
<code>@protocol <span class="blue">ProtocolName</span> &lt;<span class="blue">"Super-protocols"...</span>&gt;
<span class="hide">  // </span><span class="green block">Methods</span>
@end
</code>
                    </pre>
                </div>
                <div class="col-2">
                    <em class="code-title">.h class file (adopter of protocol)</em>
                    <pre>
<code>#import "<span class="blue">Protocol</span>.h"

@interface <span class="blue">ClassName</span> : <span class="blue">Superclass</span> &lt;<span class="blue">Protocol</span>&gt;

<span class="hide">  // </span><span class="comment">...</span>

@end
</code>
                    </pre>
                </div>
            </div>
        </section>

        <section>
            <h2>Blocks</h2>
            <p>Blocks are anonymous functions for Objective-C.</p>
            <p>Local variables declared outside the scope of a block are accessible from within the block. However, the values of the variables are determined when the block is defined, not when it is actually run. Furthermore, blocks are unable to make changes to these variables. To allow blocks to modify these variables, add <code>__block</code> to the variable declaration.</p>

            <div class="row">
                <em class="code-title">Block declaration syntax:</em>
                <pre>
<code><span class="green">ReturnType</span> (^<span class="blue">BlockName</span>)(<span class="green">ArgType1</span>, <span class="green">ArgType2</span>, ...) = ^(<span class="green">ArgType1</span> <span class="orange">arg1</span>, <span class="green">ArgType2</span> <span class="orange">arg2</span>, ...) {
    <span class="comment">...</span>
};
</code>
                </pre>
            </div>
            <div class="row">
                <div class="col-2">
                    <em class="code-title">Example (takes 2 ints, returns an int):</em>
                    <pre>
<code>int (^sum)(int, int) = ^(int a, int b) {
    return a + b;
};
</code>
                    </pre>
                </div>
                <div class="col-2">
                    <em class="code-title">Example (no arguments):</em>
                    <pre>
<code>NSString* (^randomGreeting)(void) = ^{
    int num = arc4random() % 3;
    switch (num) {
        case 0: return [NSString stringWithFormat:@"Hello"];
        case 1: return [NSString stringWithFormat:@"Steve"];
        case 2: return [NSString stringWithFormat:@"Jobs"];
    }
};
</code>
                    </pre>
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <em class="code-title">Example (default block scope):</em>
                    <pre>
<code><span class="comment">// value of "foo" within the block is determined
// when the block is defined</span>

int foo = 10;

void(^printFoo)(void) = ^(void) {
    NSLog(@"foo = %i", foo);
    <span class="comment">// modifying "foo" here => compiler error</span>
};

foo = 15;

printFoo(); <span class="comment">// prints 10</span>

<span class="comment">// foo = 15</span>
</code>
                    </pre>
                </div>
                <div class="col-2">
                    <em class="code-title">Example (__block scope):</em>
                    <pre>
<code><span class="comment">// value of "foo" within the block is determined
// when the block is run</span>

<span class="blue">__block</span> int foo = 10;

void (^printFoo)(void) = ^(void) {
    NSLog(@"foo = %i", foo);
    foo = 30;  <span class="comment">// ok</span>
};

foo = 15;

printFoo(); <span class="comment">// prints 15</span>

<span class="comment">// foo = 30</span>
</code>
                    </pre>
                </div>
            </div>

        </section>
    </body>
</html>